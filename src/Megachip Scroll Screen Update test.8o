# Megachip Scroll Screen Update Quirk test
# Tests if the scrolls update the screen or not. 
# Use 5, 7, 8, and 9, to scroll "OK" around the screen.
# If your emulator follows the quirky Mega8 behavior and updates the screen when a scroll occurs, the "OK" will appear.
# If it doesn't (like the original MEGA-CHIP8), "PR" will stay in place.
# by oxiti8

: main
0x00 0x11 # Enable Megachip mode
0x03 0x07 # Set sprite width to 7
0x04 0x05 # Set sprite height to 5
i := colors
0x02 0x03 # Load 3 color palette at i
v3 := 100
v4 := v3
i := presskey
sprite v3 v4 3
clear
i := ok
sprite v3 v4 4
loop
v0 := OCTO_KEY_S
if v0 key then scroll-down 4
v0 := OCTO_KEY_D
if v0 key then scroll-right
v0 := OCTO_KEY_A
if v0 key then scroll-left
v0 := OCTO_KEY_W
if v0 key then 0x00 0xB4
again


: ok
 0x01 0x01 0x01 0x00 0x02 0x00 0x02
 0x01 0x00 0x01 0x00 0x02 0x02 0x00
 0x01 0x00 0x01 0x00 0x02 0x02 0x00
 0x01 0x00 0x01 0x00 0x02 0x00 0x02
 0x01 0x01 0x01 0x00 0x02 0x00 0x02
: presskey
 0x03 0x03 0x03 0x00 0x02 0x02 0x02
 0x03 0x00 0x03 0x00 0x02 0x00 0x02
 0x03 0x03 0x03 0x00 0x02 0x02 0x00
 0x03 0x00 0x00 0x00 0x02 0x00 0x02
 0x03 0x00 0x00 0x00 0x02 0x00 0x02
: colors
0xFF 0xFF 0x00 0x00 # Red
0xFF 0x00 0xFF 0x00 # Green
0xFF 0x00 0x00 0xFF # Blue